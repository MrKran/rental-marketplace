# Руководство по безопасности etogo saita

## Внедренные меры безопасности

###  Защита от XSS атак
- Санитизация всех пользовательских вводов с помощью `sanitizeHtml()`
- Валидация данных на стороне клиента перед отправкой
- Блокировка выполнения скриптов через пользовательский ввод

### CSRF защита
- Генерация уникальных CSRF токенов для каждой сессии
- Валидация токенов при отправке форм
- Автоматическое обновление токенов

###  Rate Limiting
- Ограничение количества попыток отправки форм (5 попыток за 5 минут)
- Временная блокировка форм при превышении лимита
- Логирование подозрительной активности

### Валидация паролей
- Минимум 8 символов
- Обязательные заглавные и строчные буквы
- Обязательные цифры и специальные символы
- Индикатор силы пароля в реальном времени

### Мониторинг безопасности
- Отслеживание изменений DOM
- Мониторинг консольных команд
- Контроль доступа к localStorage/sessionStorage
- Логирование всех подозрительных действий

### Защита от взлома
- Блокировка контекстного меню (правый клик)
- Отключение горячих клавиш разработчика (F12, Ctrl+Shift+I, etc.)
- Блокировка выделения и копирования текста
- Защита от кликджекинга (iframe protection)
- Детекция DevTools

### Контроль доступа
- Проверка прав пользователей перед выполнением действий
- Разделение ролей (студент, преподаватель, администратор)
- Защищенные административные функции

### Панель безопасности
- Журнал событий безопасности
- Статистика угроз в реальном времени
- Рекомендации по улучшению безопасности
- Доступна только администраторам

## Как протестировать безопасность

### Тестирование форм
1. Попробуйте ввести HTML/JavaScript код в поля форм
2. Попытайтесь отправить форму более 5 раз подряд
3. Проверьте валидацию email и паролей

### Тестирование XSS
Попробуйте ввести эти данные в формы:
```javascript
<script>alert('XSS')</script>
<img src="x" onerror="alert('XSS')">
javascript:alert('XSS')
```

### Тестирование Rate Limiting
1. Быстро отправьте форму 6+ раз
2. Проверьте блокировку и таймер
3. Дождитесь разблокировки

### Тестирование DevTools Protection
1. Попробуйте открыть DevTools (F12)
2. Используйте Ctrl+Shift+I
3. Попробуйте контекстное меню
4. Попытайтесь выделить/скопировать текст

## Администрирование

### Доступ к панели безопасности
Для доступа к панели безопасности пользователь должен:
1. Быть авторизован
2. Иметь тип аккаунта `admin` ИЛИ
3. Иметь email, содержащий слово `admin`

### Демо административный аккаунт
```javascript
const adminUser = {
  id: 999,
  name: "Админ EduRent",
  email: "admin@edurent.com",
  type: "admin"
};
```

### Просмотр логов безопасности
Логи сохраняются в localStorage под ключом `security_logs`:
```javascript
const logs = JSON.parse(localStorage.getItem('security_logs') || '[]');
console.log(logs);
```

## Рекомендации для продакшена

### 1. Серверная безопасность
- Внедрить валидацию на стороне сервера
- Использовать HTTPS
- Настроить Content Security Policy (CSP)
- Включить HSTS заголовки

### 2. База данных
- Параметризованные запросы
- Шифрование чувствительных данных
- Регулярные бэкапы
- Аудит доступа

### 3. Аутентификация
- JWT токены с коротким временем жизни
- Двухфакторная аутентификация
- OAuth интеграция
- Сессионное управление

### 4. Мониторинг
- Централизованное логирование
- Алерты на подозрительную активность
- Регулярные аудиты безопасности
- Пентестинг

### 5. Обновления
- Регулярные обновления зависимостей
- Сканирование уязвимостей
- Код-ревью изменений
- Тестирование безопасности

## Известные ограничения

### Клиентская защита
Все меры безопасности на клиентской стороне могут быть обойдены опытным атакующим. Они служат для:
- Защиты от случайных пользователей
- Создания барьеров для начинающих хакеров
- Логирования попыток взлома
- Повышения общего уровня безопасности

### Рекомендации по улучшению
1. **Серверная валидация** - дублировать всю валидацию на сервере
2. **API ограничения** - rate limiting на уровне API
3. **Мониторинг сервера** - отслеживание подозрительных запросов
4. **Бэкенд логирование** - централизованные логи безопасности

---

*Данное руководство описывает меры безопасности, внедренные в клиентскую часть приложения EduRent. Для полной защиты необходимо также внедрить соответствующие меры на стороне сервера.*